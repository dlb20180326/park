webpackJsonp([14],{b8SP:function(t,e){},q8SI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("//Fk"),s=i.n(a),o=i("mtWM"),n=i.n(o),r=i("ABCa"),l=i("1HIy"),u=i("YxJB"),c=i("63CM"),m=i("mzja"),d=i("3Lt7"),p=i("2sLL"),v=i("oVYx"),g=i("UNGY"),h=i("rHil"),f=i("taJy"),x=i("fxnj"),b=i.n(x),w=i("zlMP"),_=(c.a,r.a,l.a,u.a,d.a,p.a,v.a,g.a,h.a,f.a,m.a,Previewer,{directives:{TransferDom:c.a},components:{XHeader:r.a,GroupTitle:l.a,Flexbox:u.a,FlexboxItem:d.a,XButton:p.a,DatetimePlugin:v.a,Datetime:g.a,Group:h.a,Picker:f.a,Alert:m.a,Previewer:Previewer},data:function(){return{value1:"",startTime:"",endTime:"",hourListValue:"",hot:"",ListValue:"",activeContent:"",listSingle:{},userName:"",picList:{list:[],arr:[]}}},methods:{atBig:function(t,e){console.log(this.$refs),this.$refs.previewer[e].show(t)},getList:function(){var t=this;n.a.get("pscoredetail/queryById",{params:{id:this.$route.params.moduleId}}).then(function(e){t.listSingle=e.data}).catch(function(t){console.log("fail"+t.data)})},getUser:function(){var t=this;n.a.get("ppartymember/queryByUserId",{params:{userid:this.$store.getters.user.userid}}).then(function(e){t.userName=e.data.name}).catch(function(t){console.log(t)})},openPicker:function(){this.$refs.picker.open()},submit:function(){var t=this;n()({url:"pstudy/save",method:"post",headers:{contentType:"application/json"},params:{departmentid:this.$store.getters.user.departmentid,createUserid:this.$store.getters.user.userid,roleid:this.$store.getters.user.roleid,starttime:new Date(this.startTime.replace(/-/gi,"/")).getTime(),endtime:new Date(this.endTime.replace(/-/gi,"/")).getTime(),projectid:this.$route.params.projectId,moduleid:this.$route.params.moduleId,content:this.activeContent}}).then(function(e){t.users[1].integral=e.data,e.success?(t.$vux.alert.show({title:"增加成功"}),setTimeout(function(){t.$vux.alert.hide()},1e3)):(t.$vux.alert.show({title:"增加失败"}),setTimeout(function(){t.$vux.alert.hide()},1e3))}).catch(function(e){t.$vux.alert.show({title:"增加失败"}),setTimeout(function(){t.$vux.alert.hide()},1e3)})},getActivity:function(){},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)},showPlugin:function(){this.$vux.datetime.show({cancelText:"取消",confirmText:"确定",format:"YYYY-MM-DD HH",value:"2017-05-20 18",onConfirm:function(t){console.log("plugin confirm",t)},onShow:function(){console.log("plugin show")},onHide:function(){console.log("plugin hide")}})},toggleFormat:function(){this.format="YYYY-MM-DD HH:mm"===this.format?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"},changeStart:function(t){this.startTime=t},changeEnd:function(t){this.endTime=t},clearValue:function(t){this.value6=""},clearValue8:function(t){this.value8=""},setToday:function(t){var e=new Date,i=e.getMonth()+1,a=e.getDate();i<10&&(i="0"+i),a<10&&(a="0"+a),this.value7=e.getFullYear()+"-"+i+"-"+a,console.log("set today ok")},chooseImage:function(t){var e=this;b.a.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var a=i.localIds||[];new s.a(function(t){var e=[];a.length?function i(s){return b.a.uploadImage({localId:s,isShowProgressTips:1,success:function(s){e.push(s.serverId),a.length?i(a.shift()):t(e)}})}(a.shift()):t(e)}).then(function(i){var a=[];i.map(function(t){return a.push(e.$http.get("picture/upload",{params:{mediaId:t}}))}),s.a.all(a).then(function(e){var i=[];e.map(function(t){return i.push(t.data)}),t.list.push("http://www.dlbdata.cn/dangjian/picture/show?pictureId="+i.join()),t.arr.push(i.join())})})}})}},mounted:function(){w.a.init(["chooseImage","uploadImage"]),this.getActivity(),this.getList(),this.getUser()}}),C=i("XyMi");var T=function(t){i("xPPj"),i("b8SP")},Y=Object(C.a)(_,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-body disabled-tabbar"},[i("x-header",[t._v(t._s(t.listSingle.projectName))]),t._v(" "),i("div",{staticClass:"group-item"},[i("group-title",{attrs:{slot:"title"},slot:"title"},[i("b",[t._v("党员姓名："+t._s(t.userName))])])],1),t._v(" "),i("div",{staticClass:"group-item"},[i("group-title",{attrs:{slot:"title"},slot:"title"},[i("b",[t._v("开始时间")])]),t._v(" "),i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.startTime,expression:"startTime"}],attrs:{type:"text"},domProps:{value:t.startTime},on:{input:function(e){e.target.composing||(t.startTime=e.target.value)}}})]),t._v(" "),i("flexbox-item",{staticClass:"input-addon",staticStyle:{position:"relative"}},[i("x-button",{attrs:{mini:"",type:"warn"}},[i("i",{staticClass:"iconfont dlb-icon-rili"})]),t._v(" "),i("group",{staticClass:"date-no-box"},[i("datetime",{attrs:{format:"YYYY-MM-DD HH:mm"},on:{"on-change":t.changeStart},model:{value:t.hourListValue,callback:function(e){t.hourListValue=e},expression:"hourListValue"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"group-item"},[i("group-title",{attrs:{slot:"title"},slot:"title"},[i("b",[t._v("结束时间")])]),t._v(" "),i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],attrs:{type:"text"},domProps:{value:t.endTime},on:{input:function(e){e.target.composing||(t.endTime=e.target.value)}}})]),t._v(" "),i("flexbox-item",{staticClass:"input-addon",staticStyle:{position:"relative"}},[i("x-button",{attrs:{mini:"",type:"warn"}},[i("i",{staticClass:"iconfont dlb-icon-rili"})]),t._v(" "),i("group",{staticClass:"date-no-box"},[i("datetime",{attrs:{format:"YYYY-MM-DD HH:mm"},on:{"on-change":t.changeEnd},model:{value:t.ListValue,callback:function(e){t.ListValue=e},expression:"ListValue"}})],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"group-item"},[i("group-title",{attrs:{slot:"title"},slot:"title"},[i("b",[t._v("学习内容")])]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.activeContent,expression:"activeContent"}],attrs:{cols:"30",rows:"10",maxlength:"300"},domProps:{value:t.activeContent},on:{input:function(e){e.target.composing||(t.activeContent=e.target.value)}}})],1),t._v(" "),i("div",{staticClass:"group-item"},[i("span",{staticClass:"addPic"},[t._v("添加照片")]),t._v(" "),i("div",{staticClass:"photo-list cl"},[i("ul",[t._l(t.picList.list,function(e,a){return i("li",[i("div",{staticClass:"preview"},[i("img",{key:a,staticStyle:{float:"left",width:"100%"},attrs:{width:"100",src:e},on:{click:function(e){t.atBig(t.idx,t.i)}}})])])}),t._v(" "),i("li",[i("div",{staticClass:"preview",on:{click:function(e){t.chooseImage(t.picList)}}},[i("span",{staticClass:"add-bg"})])])],2),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("previewer",{ref:"previewer",attrs:{slot:"names",list:t.picList.list,options:t.options},on:{"on-index-change":t.logIndexChange},slot:"names"})],1)])]),t._v(" "),i("div",{staticClass:"group-item"},[i("group-title",{attrs:{slot:"title"},slot:"title"}),t._v(" "),i("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){t.submit()}}},[t._v("\n            提交支部书记审核\n        ")])],1)],1)},[],!1,T,"data-v-5f6789b1",null);e.default=Y.exports},xPPj:function(t,e){}});
//# sourceMappingURL=14.7584acf0d219d90ac497.js.map