webpackJsonp([37],{efhR:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("5enu"),n=s("2FOq"),e=s("63CM"),c=s("1sNz"),o=(e.a,i.a,n.a,c.a,{directives:{TransferDom:e.a},components:{"r-header":i.a,Previewer:n.a,ViewBox:c.a},methods:{show:function(t){this.$refs.previewer.show(t)},showPicInfo:function(t){this.$refs.previewer2.show(t)},spread:function(){this.spr=!0,this.btnAn=!this.btnAn,this.btnPack=!this.btnPack},folding:function(){this.spr=!this.spr,this.btnAn=!this.btnAn,this.btnPack=!this.btnPack},noSpread:function(){this.noSpr=!0,this.nobtnAn=!this.nobtnAn,this.nobtnPack=!this.nobtnPack},noFolding:function(){this.noSpr=!this.noSpr,this.nobtnAn=!this.nobtnAn,this.nobtnPack=!this.nobtnPack},logIndexChange:function(t){console.log(t)},getData:function(){var t=this;this.$http.post("active/queryById?activeId="+this.$route.params.activeId).then(function(a){(t.activeData=a.data,t.contents.title=a.data.activeTypeName+"详情",t.activeNames=t.activeData.activeTypeName,t.peopleNum=t.activeData.notParticipate.length+t.activeData.participate.length,t.participants=t.activeData.participate.length,t.Noparticipants=t.activeData.notParticipate.length,t.participants>=4&&(t.btnAn=!0),t.Noparticipants>=4&&(t.nobtnAn=!0),t.activeData.picIds)&&t.activeData.picIds.split(",").forEach(function(a){if(a){var s={};s.msrc="http://www.dlbdata.cn/dangjian/picture/showThumbnail?pictureId="+a,s.src="http://www.dlbdata.cn/dangjian/picture/show?pictureId="+a,t.picList.push(s)}})}).catch(function(t){console.log(t)})},getPic:function(){var t=this;this.$http.post("active/getActivePictures?activeId="+this.$route.params.activeId).then(function(a){t.picInfo=a.data;for(var s=0;s<t.picInfo.length;s++){var i={};i.msrc="http://www.dlbdata.cn/dangjian/picture/showThumbnail?pictureId="+t.picInfo[s].pictureId,i.src="http://www.dlbdata.cn/dangjian/picture/show?pictureId="+t.picInfo[s].pictureId,t.list.push(i)}}).catch(function(t){console.log(t)})},dataPick:function(t){return Date.prototype.toLocaleString=function(){return this.getFullYear()+"年"+(this.getMonth()+1)+"月"+this.getDate()+"日"},new Date(t).toLocaleString()}},mounted:function(){this.getData(),this.getPic()},filters:{formatDuring:function(t){return""==t||null==t||void 0==t?t="无":(Date.prototype.toLocaleString=function(){var t=this.getMonth()+1;t<10&&(t="0"+t);var a=this.getDate();a<10&&(a="0"+a);var s=this.getHours();s<10&&(s="0"+s);var i=this.getMinutes();return i<10&&(i="0"+i),this.getFullYear()+"."+t+"."+a+" "+s+":"+i},new Date(t).toLocaleString())}},data:function(){return{num:0,activeData:{},picInfo:[],list:[],picList:[],spr:!1,noSpr:!1,nobtnPack:!1,nobtnAn:!1,btnPack:!1,btnAn:!1,peopleNum:null,participants:null,Noparticipants:null,activeNames:"",contents:{rights:"",title:"bbb"},roleId:this.$store.getters.user.roleid,options:{getThumbBoundsFn:function(t){var a=document.querySelectorAll(".previewer-demo-img")[t],s=window.pageYOffset||document.documentElement.scrollTop,i=a.getBoundingClientRect();return{x:i.left,y:i.top+s,w:i.width}}}}}}),r=s("XyMi");var l=function(t){s("ymO/")},p=Object(r.a)(o,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"page-body"},[s("view-box",{ref:"viewBox",attrs:{"body-padding-top":".46rem"}},[s("r-header",{attrs:{rfs:t.contents}}),t._v(" "),s("p",{staticClass:"titles"},[t._v(t._s(t.activeData.activeName))]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(t.activeNames)+"活动发起人："),s("span",{staticClass:"dark"},[t._v(t._s(t.activeData.activeCreatePeopleName))])]),t._v(" "),s("p",{staticClass:"time"},[t._v("活动时间："),s("span",{staticClass:"dark"},[t._v(t._s(t._f("formatDuring")(t.activeData.startTime))+"~"+t._s(t._f("formatDuring")(t.activeData.endTime)))])]),t._v(" "),s("p",{staticClass:"time"},[t._v("地点："),s("span",{staticClass:"dark"},[t._v(t._s(t.activeData.activePace))])]),t._v(" "),s("div",{staticClass:"artical"},[t._v("\n            "+t._s(t.activeData.activeContext)+"\n            \n            "),t._v(" "),s("div",{staticClass:"img-show-pic"},[t._l(t.picList,function(a,i){return s("img",{key:i,staticClass:"previewer-demo-img",attrs:{src:a.msrc},on:{click:function(a){t.showPicInfo(i)}}})}),t._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("previewer",{ref:"previewer2",attrs:{list:t.picList,options:t.options},on:{"on-index-change":t.logIndexChange}})],1)],2)]),t._v(" "),s("p",{staticClass:"allPic"},[s("span",{staticClass:"bg-line"}),t._v(" "),s("span",{staticClass:"picture"},[t._v("活动图集")]),t._v(" "),s("span",{staticClass:"numberz"},[s("span",{staticStyle:{color:"#ff0000"}},[t._v(t._s(t.list&&t.list.length||t.num))]),t._v("张")])]),t._v(" "),s("div",{staticClass:"img-show"},[t._l(t.list,function(a,i){return s("img",{key:i,staticClass:"previewer-demo-img",attrs:{src:a.msrc},on:{click:function(a){t.show(i)}}})}),t._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("previewer",{ref:"previewer",attrs:{list:t.list,options:t.options},on:{"on-index-change":t.logIndexChange}})],1)],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:4!=t.roleId,expression:"roleId != 4 "}]},[s("p",{staticClass:"allPic"},[s("span",{staticClass:"bg-line"}),t._v(" "),s("span",{staticClass:"picture"},[t._v("参与人员")]),t._v(" "),s("span",{staticClass:"numberz"},[s("span",{staticClass:"color-num"},[t._v(t._s(t.participants))]),t._v("/"+t._s(t.peopleNum))])]),t._v(" "),s("div",{staticClass:"wz-fonts",class:[t.spr?"auto":""]},t._l(t.activeData.participate,function(a,i){return s("span",{key:i},[t._v(t._s(a.name))])})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.btnAn,expression:"btnAn"}],staticClass:"btnMore",on:{click:t.spread}},[t._v("查看全部参与人员名单"),s("span",{staticClass:"down"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.btnPack,expression:"btnPack"}],staticClass:"btnMore",on:{click:t.folding}},[t._v("收起"),s("span",{staticClass:"up"})]),t._v(" "),s("p",{staticClass:"allPic"},[s("span",{staticClass:"bg-line"}),t._v(" "),s("span",{staticClass:"no-picture"},[t._v("未参与人员")]),t._v(" "),s("span",{staticClass:"numberz"},[s("span",{staticClass:"color-num"},[t._v(t._s(t.Noparticipants))]),t._v("/"+t._s(t.peopleNum))])]),t._v(" "),s("div",{staticClass:"wz-fonts",class:[t.noSpr?"auto":""]},t._l(t.activeData.notParticipate,function(a,i){return s("span",{key:i,class:-1===a.userRoleId?"titleClass":"contentClass"},[t._v("\n                    "+t._s(a.name)+"\n                ")])})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nobtnAn,expression:"nobtnAn"}],staticClass:"btnMore",on:{click:t.noSpread}},[t._v("查看全部参与人员名单"),s("span",{staticClass:"down"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.nobtnPack,expression:"nobtnPack"}],staticClass:"btnMore",on:{click:t.noFolding}},[s("span",{staticStyle:{"margin-left":".2rem"}},[t._v(" 收起")]),s("span",{staticClass:"up"})])])],1)],1)},[],!1,l,"data-v-59aef680",null);a.default=p.exports},"ymO/":function(t,a){}});
//# sourceMappingURL=37.41251a2354a4b5347a17.js.map