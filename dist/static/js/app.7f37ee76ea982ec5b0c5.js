webpackJsonp([20],{Bfwr:function(t,e,n){"use strict";Boolean,String,String,String;var i={name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}},o=n("XyMi");var a=function(t){n("MAGn")},s=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading"},[n("div",{staticClass:"weui-mask_transparent"}),t._v(" "),n("div",{staticClass:"weui-toast",style:{position:t.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),n("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2)])])])},[],!1,a,null,null);e.a=s.exports},EIuN:function(t,e){},FFkj:function(t,e){},MAGn:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"default",function(){return C});var o=n("7+uW"),a=n("v5o6"),s=n.n(a),r=n("XyMi");var u=function(t){n("uRhU"),n("bq2q"),n("FFkj")},l=Object(r.a)({},function(){var t=this.$createElement;return(this._self._c||t)("router-view")},[],!1,u,null,null).exports,c=n("/ocq"),p=n("NYxO"),h=n("fZjL"),f=n.n(h),d=n("//Fk"),m=n.n(d),v=n("woOf"),w=n.n(v),g=n("17Ff"),y=["roleId","userId","ptoken"],b={state:{},getters:{user:function(t){return t}},actions:{userinfo:function(t,e){var n=t.commit;return g.a.get("userId")?o.default.http.get("puser/queryById",{params:w()(e||{},{userId:g.a.get("userId")})}).then(function(t){return n("setUser",t.entry),t}):m.a.reject()},login:function(t,e){t.commit;return o.default.http.post("puser/tologin",e)},logout:function(t){var e=t.commit;return new m.a(function(t,n){e("clearUser"),t()})}},mutations:{setUser:function(t,e){f()(e).map(function(n){t[n]=e[n]})},clearUser:function(t){f()(t).map(function(e){return delete t[e]}),y.forEach(function(t){return g.a.remove(t,{path:"/"})})}}};o.default.use(p.a);var x=new p.a.Store({state:{},getters:{},mutations:{},modules:{user:b},strict:!1}),_=[{path:"/",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"4er+"))},children:[{path:"",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"iNA+"))}},{path:"party",component:function(){return n.e(12).then(n.bind(null,"alll"))}},{path:"party/dues",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"RfVU"))}},{path:"party/branch",component:function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"Pu2Y"))}},{path:"party/member",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"6CEs"))}},{path:"points",component:function(){return n.e(9).then(n.bind(null,"2TJQ"))}},{path:"points/evaluation",component:function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"31oV"))}},{path:"points/obtain",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"dA7d"))}},{path:"activity",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"sZNU"))}},{path:"activity/detail",component:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"myIg"))}},{path:"activity/detailPack",component:function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"/e/c"))}},{path:"activity/post",component:function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"5KQT"))}},{path:"activity/new",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"SSzF"))}},{path:"life",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"xdbm"))}},{path:"life/lifePack",component:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"IfIH"))}},{path:"life/organize",component:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"zakv"))}}]},{path:"/login",component:function(){return n.e(4).then(n.bind(null,"Quw4"))}}];o.default.use(c.a);var S=new c.a({mode:"history",routes:_});S.beforeEach(function(t,e,n){if(o.default.$vux.loading.show({text:"加载中"}),/^\/login/.test(t.path)||x.state.user.userid)return n();x.dispatch("userinfo").then(function(t){return n()},function(t){/^\/login/.test(e.path)?(n(!1),setTimeout(function(){return o.default.$vux.loading.hide()},60)):n({path:"/login"})})}),S.afterEach(function(t){return setTimeout(function(){return o.default.$vux.loading.hide()},60)});var P=S,N=n("mtWM"),k=n.n(N);k.a.interceptors.request.use(function(t){return/^(http(s)?:\/\/|\/)/.test(t.url)||(t.url="/dangjian/"+t.url),t},function(t){return m.a.reject(t)}),k.a.interceptors.response.use(function(t){return t.data.status?t.data:m.a.reject(t.data)},function(t){return m.a.reject(t)});var C={axios:{}},j=n("yD8N"),M=n("Y+qm"),I=n("3BeM");o.default.use(j.a),o.default.use(M.a),o.default.use(I.a),s.a.attach(document.body),o.default.config.productionTip=!1,new o.default({el:"#app",router:P,store:x,utils:i,components:{App:l},template:"<App/>"})},bq2q:function(t,e){},rLAy:function(t,e,n){"use strict";var i=n("xNvf"),o=(i.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[i.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}),a=n("XyMi");var s=function(t){n("EIuN")},r=Object(a.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-toast"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),n("transition",{attrs:{name:t.currentTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[n("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?n("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):n("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},[],!1,s,null,null);e.a=r.exports},uRhU:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7f37ee76ea982ec5b0c5.js.map